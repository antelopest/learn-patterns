# Singleton (одиночка)

`Singleton` гарантирует, что класс имеет только один экземпляр, и предоставляет глобальную точку доступа к нему.

## Применение:

* Конфигурации приложения
* Логирование
* Работа с базой данных
* Кэш

## Реализация на JavaScript:

```js
class Singleton {
    constructor() {
        if (Singleton.instance) {
            return Singleton.instance;
        }

        this.timestamp = new Date();

        Singleton.instance = this;
    }

    getTime() {
        return this.timestamp;
    }
}

const singleton = new Singleton();
const singleton2 = new Singleton();

console.log(singleton === singleton2); // true
console.log(singleton.getTime()); // Дата создания первого объекта
console.log(singleton2.getTime()); // Дата создания первого объекта
```

### Пояснения:

* Проверка if (Singleton.instance) предотвращает создание нового объекта.
* Все последующие вызовы возвращают тот же экземпляр.

## Реализация на TypeScript

```js
class Singleton {
    private static instance: Singleton;

    public timestamp: Date;

    private constructor() {
        this.timestamp = new Date();
    }

    public static getInstance(): Singleton {
        if (!Singleton.instance) {
            Singleton.instance = new Singleton();
        }

        return Singleton.instance;
    }

    public getTime(): Date {
        return this.timestamp;
    }
}

const instance = Singleton.getInstance();
const instance2 = Singleton.getInstance();

console.log(instance === instance2); // true
console.log(instance.getTime()); // Дата создания первого объекта
console.log(instance2.getTime()); // Дата создания первого объекта
```

### Пояснения:

* `private constructor()` запрещает создавать объект напрямую через `new`.
* `static getInstance()` возвращает единственный экземпляр.
* Типизация гарантирует, что мы работаем с правильным объектом.

### Отличия JavaScript и TypeScript версии

| Особенность         | JavaScript              | TypeScript                     |
|---------------------|-------------------------|--------------------------------|
| Конструктор         | публичный               | приватный (`private`)          |
| Типизация           | нет                     | есть (`Singleton`)             |
| Доступ к экземпляру | через `new`             | через `getInstance()`          |
| Проверка instance   | через `static` свойство | через `private static` и метод |

### Практические примеры реализации Singleton

* [Config](examples/app-config/README.md)
* [Logger](examples/logger/README.md)
* Database
* Cache
